//====================================================================
//ステージトラップスクリプト
//[13021][森－武器①]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ
// 2935		フードスロット
// Fx_322Medic1 武器② 万能薬×3
// Fx_321Food1  武器① 飯

//■ルートフラグ 2096-2192

// 2102 武器① 扇風機を切り替えた（初回)
// 2103 武器② プロペラ起動（初回)
// 2105 武器③ 女神像を正しい位置に配置した

// 2140 武器③ ⑧樽

// 2150 武器① ①壷
// 2151 武器① ②壷
// 2152 武器① ③ハニワ

// 2160 武器② ①壷
// 2161 武器② ②壷
// 2162 武器② ③ハニワ
// 2163 武器② ④壷

// 2170 武器③ ①壷
// 2171 武器③ ②壷
// 2172 武器③ ③壷

// 2180 武器① ③ヒビ壁
// 2181 武器① ④ヒビ壁

// 2185 武器② ②大砲
// 2186 武器② ④大砲

// 2190 武器③ ③岩
// 2191 武器③ ③岩
// 2192 武器③ ④爆弾タル
// 2193 武器③ ⑤岩
// 2194 武器③ ⑥岩

//■ローカルフラグ
// 101 ⑧敵が出現
// 102 ⑥敵が出現
// 103 宝箱ジャンプワーク
// 104 ④扇風機と⑤扇風機 切り替え

#WOODBOX_CH		49
#IT_WOODBOX		185		//∴185チャーハン

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(61,0)//鳥1
	SE(72,0)//鳥2

//■地形
	set_obj("obx0534",	 4, 3,    25, -25,  0,	 0) //沼大a
	set_obj("obx0534",	 6, 3,     0, 250,  0,	 0) //沼大b1
	set_obj("obx0534",	 6, 4,     0,-250,  0,	 0) //沼大b2
	set_obj("obx0534",	 4, 6,  -275,-275,  0,	 0) //沼大c1
	set_obj("obx0534",	 4, 5,  -275, 275,  0,	 0) //沼大c2

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 3, 8,     0,   0,  0,		180,  0201, 6,"K1_13019;")	//①エントリ 中継分岐
	set_obj("@obx0033b", 3, 8,     0,   0,  0,		180)						//①アーチ（森金）
	set_chr(190,1400,	 3, 8,	   0,   0,  0,		  0,   180, 0,";")			//アーチ（ダミー）

	set_chr( 91,990,	 5, 1,     0,   0,  0,		  0,  0201, 6,"K0_0;")		//②エントリ 武器②
	set_obj("@obx0023b", 5, 1,     0,   0,  0,		  0)						//②階段出（森金）
	set_chr(191,1301,	 5, 1,	   0,   0,  0,		  0,     0, 0,";")			//階段上（ダミー）

//■スイッチ・看板
	set_chr( 55,672,	 5, 2,     0,-650,  0,		  0,   180, 6,"<EV_JUMP1>") //①ジャンプ台
	set_chr( 56,672,	 5, 2,     0, 850,  0,		  0,     0, 6,"<EV_JUMP2>") //②ジャンプ台
	set_chr( 57,804,	 4, 4,     0, 900,  0,		  0,     0, 8,"(L2?99 [9991強風注意] WT?30 L2!99 [9903] WT?30);")	//③看板

	set_chr( 58,669,	 5, 4,   250,   0,  0,		  3,    90, 0,";") //④扇風機
	set_chr( 59,669,	 5, 4,     0, 650,  0,		  2,   180, 0,";") //⑤扇風機
	set_chr( 60,571,	 5, 4,   175, 625,  0,		  6,   270,	5,"M!_99")	//⑥レバースイッチ
	set_chr( 62,650,	 2, 3,     0,   0,  0,		  2,     0, 0,";") //⑦苗床 ②ハニワ
	set_chr( 63,669,	 3, 2,     0,   0,  0,		  3,   270, 0,";") //⑧扇風機

//■ハニワ・壷

	if ( !F2150 )
	{
		set_chr( 40,802,	 4, 6,   -75,-650,-50,		  2,    45, 0,"I_$$$1 SF2150 V4_140;")	//①壷
		set_chr(140,811,	 4, 6,   -75,-650,-50,		 -1,    45, 0,";")
	}
	else
	{
		set_chr(140,811,	 4, 6,   -75,-650,-50,		  0,    45, 0,";")
	}


	if ( !F2151 )
	{
		set_chr( 41,802,	 3, 5,   575, 475,  0,		  2,   250, 0,"I_$$$1 SF2151 V4_141;")	//②壷
		set_chr(141,811,	 3, 5,   575, 475,  0,		 -1,   250, 0,";")
	}
	else
	{
		set_chr(141,811,	 3, 5,   575, 475,  0,		  0,   250, 0,";")
	}


	if ( !F2152 )
	{
		set_chr( 42,634,	 2, 3,     0,   0, 10,		  2,     0, 0,"I_US01 SF2152 V4_142 SF102;")	//③ハニワ
		set_chr(142,812,	 2, 3,     0,   0, 10,		 -1,     0, 0,";")
	}
	else
	{
		F_set(102)
		set_chr(142,812,	 2, 3,     0,   0, 10,		  0,     0, 0,";")
	}


//■宝箱
	if ( !Fx_321Food1 )
		set_chr( WOODBOX_CH,562,	4, 3,    100,   0,450,		  6,   270,20,"<TK_WOODBOX><EV_SetGetFood1>;")	//①木箱
	else
		set_chr( WOODBOX_CH,562,	4, 3,    100,   0,450,		  7,   270, 0,";")	//①木箱

	set_chr(148,990, 0, 0,     0,   0,  0,		  0,     0, 8,"(!F103 #3_49 F103 #2_49)")
	set_chr(149,990, 0, 0,     0,   0,  0,		  0,     0, 9,"RF103 M6?49 L3?4900 SF103")

//■罠・障害物

	if ( !F2180 )
	{
		set_chr( 65,633,	 3, 5,   975, 125,  0,		  2,   270, 0,"SF2180;") //①ヒビ壁a
	}

	if ( !F2181 )
	{
		set_chr( 66,633,	 3, 5,   600, 350,  0,		  2,     0, 0,"SF2181;") //①ヒビ壁b
	}


	set_chr( 67,727,	 4, 3,   100,   0,350,		  0,     0, 0,";")	//②移動床大（森）
	set_chr( 68,677,	 4, 3,  -225,   0,200,		  0,     0, 0,";")	//③移動床小

	set_chr( 72,677,	 6, 3,     0, 250,-25,		  0,     0, 8,"(Y1_-225 WT?5 Y1_450 WT?5 Y1_-225);")	//④移動床小
	set_chr( 73,677,	 6, 4,     0,-250,-25,		  0,     0, 8,"(X1_225 WT?5 X1_-450 WT?5 X1_225);")	//⑤移動床小

	set_chr(110,627,	 5, 2,     0,-275,  0,		  0,     0, 0,";")	//柵小
	set_chr(111,627,	 5, 2,     0, 525,  0,		  0,     0, 0,";")	//柵小

//■敵


	set_chr(  3,268,	 3, 6,   850,-350,  0,		  2,     0, 0,";") //①敵 もりいわがえる
	set_chr(  4,268,	 4, 5,     0,   0,  0,		  2,     0, 0,";") //②敵 もりいわがえる

	set_chr(  6,303,	 3, 3,    50,-750,  0,		  2,     0, 0,";") //③敵a もさもさ
	set_chr(  7,303,	 3, 3,   -50, 750,  0,		  2,     0, 0,";") //③敵b もさもさ

	set_chr( 10,219		 2, 3,  -250,   0,250,		 -1,   270, 8,"F102 WT?50 V2_99;")//④敵 わーらびっと
	set_chr( 11,218		 2, 3,   650,   0,  0,		 -1,    90, 8,"F102 WT?8 V2_99;") //⑤敵a すぷらいと
	set_chr( 12,218		 2, 3,   450,-350,  0,		 -1,   100, 8,"F102 WT?16 V2_99;")//⑤敵b すぷらいと
	set_chr( 13,218		 2, 3,   450, 350,  0,		 -1,    80, 8,"F102 WT?24 V2_99;")//⑤敵c すぷらいと
	set_chr( 14,218		 3, 3,  -850,   0,  0,		 -1,   110, 8,"F102 WT?32 V2_99;")//⑤敵d すぷらいと
	set_chr( 15,218		 3, 3,  -550,   0,  0,		 -1,    70, 8,"F102 WT?40 V2_99;")//⑤敵e すぷらいと
	set_chr( 16,218		 3, 3,  -250,   0,  0,		 -1,   120, 8,"F102 WT?48 V2_99;")//⑤敵f すぷらいと

	set_chr( 18,268,	 6, 3,     0, 250, 50,		  2,   180, 0,";") //⑥敵 もりいわがえる
	set_chr( 19,201,	 6, 4,     0,-250, 50,		  2,   180, 8,"(X1_225 WT?5 X1_-450 WT?5 X1_225);") //⑦敵 まっどふらわー

	set_chr( 21,303,	 5, 5,   850, -50,  0,		  2,   180, 0,";") //⑧敵a もさもさ
	set_chr( 22,303,	 5, 5,  1050,  50,  0,		  2,     0, 0,";") //⑧敵b もさもさ

	set_chr( 24,268,	 5, 3,     0,   0,450,		 -1,   270, 8,"F101 V1_99;") //⑨敵 もりいわがえる
	set_chr( 25,256,	 4, 2,     0,   0,450,		 -1,   270, 8,"F102 V1_99;") //⑩敵 もりおこじょ

	set_chr( 26,303,	 6, 2,     0,   0,  0,		  2,    90, 0,";") //⑪敵 もさもさ

//■イベント
	set_chr( 80,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"(M5?60 SF104 M5_58 M3_59 #3_84 #3_85 #7_86 WT?15 M4?60 RF104 M3_58 M5_59 #7_84 #7_85 #3_86 WT?15 );")//⑤扇風機

	set_chr( 81,990,	 5, 3,     0, 900,  0,		  0,   501, 6,"SF101;")//⑨敵エリア
	set_chr( 82,990,	 4, 2,     0,   0,  0,		  0,   105, 6,"SF102;")//⑩敵エリア

	set_chr( 84,990,	 5, 4,  -650, 400,  0,		  0,041704, 7,"x1_98")	// ④扇風機-横風
	set_chr( 85,990,	 4, 4,   550,   0,  0,		  0,042904, 7,"x1_98")	// ④扇風機-横風
	set_chr( 86,990,	 5, 3,     0, 750,  0,		  0,040433, 0,"y9_98")	// ④扇風機-縦風
	set_chr( 87,990,	 4, 2,   650,   0,  0,		  0,044804, 7,"x9_98")	// ⑤扇風機
	set_chr( 88,990,	 4, 2,  -150,   0,  0,		  0,     0, 3,";")	// 配置用null
	set_chr( 89,990,	 5, 2,  -300,   0,  0,		  0,     0, 3,";")	// 配置用null

	if ( !F2102 )
	{
		set_chr( 83,990,	 0, 0,    0,   0,  0,		  0,     0, 8,"F104 WT?10 O1_18 SF2102;")	// 配置用null
	}

//■場面固有設定
	EV("EV_GenWind")

}

//--------------------------------------------------------------------
EV_JUMP1
{
	//	ch,typ	tim,xyz		高さ
	jump(CH1,2,	21,	0,-850,0,	350)
	jump(CH2,2,	21,	0,-850,0,	350)
	jump(PET,2,	21,	0,-850,0,	350)
}

//--------------------------------------------------------------------
EV_JUMP2
{
	//	ch,typ	tim,xyz		高さ
	jump(PLAYER1,2,	29,	0,1900,0,	400)
	jump(PLAYER2,2,	29,	0,1900,0,	400)
	jump(PET,2,	29,	0,1900,0,	400)
}
//--------------------------------------------------------------------
EV_GenWind
{
	if ( !F104 )
	{
		EFF_chr(21560, 85,  90, 100, 0,"TG1")// ←
		EFF_chr(21560, 84,  90, 100, 0,"TG1")// ←
	}
	else
	{
		EFF_chr(21560, 86, 180, 100, 0,"TG1")// ↑
	}
	EFF_chr(21560, 88, 270, 100, 0,"TG1")// →
	EFF_chr(21560, 89, 270, 100, 0,"TG1")// →
	wait( 25 )


	if ( !F104 )
	{
		EFF_chr(21560, 58,  90, 100, 0,"obx0454")// ←
	}
	else
	{
		EFF_chr(21560, 59, 180, 100, 0,"obx0454")// ↑
	}
	EFF_chr(21560, 63, 270, 100, 0,"obx0454")// →

	wait( 25 )

	loop
}

//--------------------------------------------------------------------
EV_SetGetFood1
{
	F_set(Fx_321Food1)
}

#EndScriptTable
//====================================================================

