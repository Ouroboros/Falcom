//====================================================================
//ステ`ジトラップスクリプト
//[15013][城－墓觫]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グロ`バルフラグ．ル`トフラグはev51112.txt参照

//■ロ`カルフラグ
// 100 モンスタ`部屋に入った。ミニキノコが移涌赡埭摔胜搿
// 101 EV_MonsterParty初期化ワ`ク
// 102 ①长蛉绀丹护郡ミニキノコを特定地点まで移婴筏俊
// 103 ミニキノコをさらにhくの特定地点まで移婴筏俊
// 104 ミニキノコがキノコと会った

#TAKARA_CH	48
#IT_TAKARA	028		//◇028ライダ`ス`ツ

//--------------------------------------------------------------------
INIT
{
//■地形

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■A段．扉

	set_chr( 90,990,	 3,10,     0,   0,  0,		180,  0201, 6,"K0_1;")		//①エントリ 墓觫
	set_obj("@obx0092a", 3,10,     0,   0,  0,		180)						//①A段（墓觯
	set_chr(190,1300,	 3,10,	   0,   0,  0,		  0,   180, 0,";")			//A段下（ダミ`）

	set_chr( 91,990,	 7, 1,     0,   0,  0,		  0,  0201, 6,"K0_15019;")	//②エントリ 墓鼋K
	set_obj("@obx0082a", 7, 1,     0,   0,  0,		  0)						//②A段（墓觯
	set_chr(109,622,	 7, 1,     0,   0,  0,		  0,     0, 0,";")			//②ゴ`ル用天使
	set_chr(191,1400,	 7, 1,	   0,   0,  0,		  0,     0, 0,";")			//ア`チ（ダミ`）

	set_chr( 50,505,	 3, 9,   900,   0,  0,		  3,    90, 6,";")	//③扉（地下） 自由
	set_chr( 51,505,	 7, 5,     0, 900,  0,		  6,   180, 0,";")	//④扉（地下） 自由
	set_chr( 52,505,	 7, 4,     0,-900,  0,		  8,   180, 6,";")	//⑤扉（地下） 一通
	set_chr( 53,505,	 3, 8,   900,   0,  0,		  6,    90, 0,";")	//⑥扉（地下） _放
	set_chr( 54,505,	 5, 4,   900,   0,  0,		  7,    90, 0,";")	//⑦扉（地下） ]i

//■スイッチ．看板
	set_chr( 55,650,	 6, 4,  -360,   0,  0,		  2,     0, 0,";"); //①苗床

//■ハニワ．
	if ( !F2170 )
	{
		set_chr( 40,634,	 6, 7,   350, 350,  0,		  2,   135, 0,"I_US01 SF2170 V4_140;")	//①ハニワ
		set_chr(140,812,	 6, 7,   350, 350,  0,		 -1,   135, 0,";")
	}
	else
	{
		set_chr(140,812,	 6, 7,   350, 350,  0,		  0,   135, 0,";")
	}


	if ( !F2171 )
	{
		set_chr( 41,802,	 6, 4,    50, 900,  0,		  2,   180, 0,"I_$$$1 SF2171 V4_141;")	//②
		set_chr(141,811,	 6, 4,    50, 900,  0,		 -1,   180, 0,";")
	}
	else
	{
		set_chr(141,811,	 6, 4,    50, 900,  0,		  0,   180, 0,";")
	}


	if ( !F2172 )
	{
		set_chr( 42,802,	 8, 4,   -50, 900,  0,		  2,    90, 0,"I_$$$1 SF2172 V4_142;")	//③
		set_chr(142,811,	 8, 4,   -50, 900,  0,		 -1,    90, 0,";")
	}
	else
	{
		set_chr(142,811,	 8, 4,   -50, 900,  0,		  0,    90, 0,";")
	}


	if ( !F2173 )
	{
		set_chr( 43,802,	 7, 3,  -250, -50,  0,		  2,   300, 0,"I_$$$1 SF2173 V4_143;")	//④
		set_chr(143,811,	 7, 3,  -250, -50,  0,		 -1,   300, 0,";")
	}
	else
	{
		set_chr(143,811,	 7, 3,  -250, -50,  0,		  0,   300, 0,";")
	}


//■宝箱
	set_chr( 49,626,	 7, 2,     0,-250,  0,		  0,     0,10,"!F2956 I_SLOT SF2956 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2956 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}


	if(IT_TAKARA<1)
		set_chr( TAKARA_CH,560,	   5, 4,     0,   0,  0,  	   6,   270,20,"<TK_TAKARA>;")		//②宝箱（K）
	else
		set_chr( TAKARA_CH,560,    5, 4,     0,   0,  0,  	   7,   270, 0,";")		//②宝箱（K）


//■F．障害物
	set_chr(110,627,	 3, 8,     0, 900,  0,		  0,     0, 0,";")	//判
	color2(110, 61,73,100, 0,0,0)	// 墓訾扭紊

	set_chr( 65,623,	 3, 8,   100,   0,-43,		  3,     0, 0,";")  //①ガスコンロ

	if ( !F2108 )
	{
		set_chr( 66,676,	 3, 8,   100,   0,  5,		  0,     0, 0,";")	//①ミニキノコ
	}
	else
	{
		set_chr( 66,676,	 7, 4,   100,   0,  5,		  0,     0, 0,";")	//①ミニキノコ
	}
	F_set_chr( 66,CF_NO_HPBAR)	// ミニマップ非表示
	F_set_chr( 66,CF_NO_MINIMAP)	// ミニマップ非表示
	F_set_chr( 66,CF_NO_DAMAGE_C)	// ミニマップ非表示

	if ( !F2109 )
	{
		set_chr( 67,643,	 7, 3,   -75, 600,  0,		  0,     0, 0,";")	//②キノコ
	}
	else
	{
		set_chr( 67,643,	 6, 4,  -360,   0,  0,		  0,     0, 0,";")	//②キノコ
	}


	if ( !F2190 )
	{
		set_chr( 70,641,	 6, 7,   275,-275,  0,		  2,     0, 0,"I_$$$2 SF2190;")	//⑤パラボラアンテナ
	}

	if ( !F2191 )
	{
		set_chr( 71,641,	 6, 6,   275, 275,  0,		  2,     0, 0,"I_$$$2 SF2191;")	//⑥パラボラアンテナ
	}

	if ( !F2192 )
	{
		set_chr( 72,641,	 7, 6,  -275, 275,  0,		  2,     0, 0,"I_$$$2 SF2192;")	//⑦パラボラアンテナ
	}


//■
	set_chr(  1,313,	 3, 8,   100,-250,  0,		  6,     0, 8,"F100 M6?99 M2_99;")  // ①a うぃざ`ど
	set_chr(  2,276,	 3, 8,   350,   0,  0,		  6,    90, 8,"F100 M6?99 M2_99;")  // ①b うぃるおうぃすぷ
	set_chr(  3,222,	 3, 8,   100, 250,  0,		  6,   180, 8,"F100 M6?99 M2_99;")  // ①c ぞんび
	set_chr(  4,155,	 3, 8,  -150,   0,  0,		  6,   270, 8,"F100 M6?99 M2_99;")  // ①d まっどねす

	set_chr(  7,267,	 5, 7,  -900,  50,400,		  2,   135, 0,";") //② おうごんばっと
	set_chr(  8,267,	 6, 6,  -200,-350,400,		  2,    45, 0,";") //③ おうごんばっと

	set_chr( 11,222,	 7, 5,  -250,-250,  0,		  2,     0, 0,";")  // ④ ぞんび
	set_chr( 12,222,	 7, 5,   250,-250,  0,		  2,     0, 0,";")  // ⑤ ぞんび

	set_chr( 13,313,	 7, 4,  -250, 450,  0,		  2,     0, 0,";")  // ⑥a うぃざ`ど
	set_chr( 14,313,	 7, 4,   250, 450,  0,		  2,     0, 0,";")  // ⑥b うぃざ`ど

	set_chr( 15,276,	 8, 5,  -350,-350,  0,		  2,    90, 0,";") //⑦ うぃるおうぃすぷ
	set_chr( 16,276,	 6, 5,   350,-350,  0,		  2,   270, 0,";") //⑧ うぃるおうぃすぷ

//■F．障害物


//■イベント
	// ミニキノコ扉
	if ( !F2108 )
	{
		// 101 EV_InitMonsterParty初期化gフラグ
		set_chr( 80,990,	 3, 8,   800,   0,  0,		  0,  0205, 6,"SF100 <EV_EnterMonsterRoom>;")			// ① 部屋に侵入
		set_chr( 81,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F1 F2 F3 F4 !F102 SF102 #0_85 #8_86;")	// ① 长蛉
		set_chr( 82,990,	 4, 8,     0,   0,  0,		  0,     0, 8,"L4?9966 !F102 SF102 #0_85 #8_86;")		// ① 部屋からミニキノコをZ取
		set_chr( 83,990,	 5, 7,   900,   0,  0,		  0,     0, 8,"L4?9966 !F103 SF103 #0_85 #0_86 #8_87;")	// ① 移又
		set_chr( 84,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"L6?6766 SF104 #0_85 #0_86 #0_87 WT?5 [6620お父さん！] WT?30 [6720息子よ！] SF2108 WT?10 O1_18 WT?40[6603]WT?30[6703] ;")	// ⑥ H父と会う

		set_chr( 88,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2108 M4_52;")

		// 魔物の仲gが攻膜蚴埭堡郡楗ぅ佶螗冉獬するようなことをしたい
		set_chr( 85,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"(WT?30 Lc?6600 [6620……]WT?60[6603] WT?30 Lc?6600 [6620シクシク…]WT?60[6603] WT?30 Lc?6600 [6620助けて…]WT?60[6603] WT?30 Lc?6600 [6620お化けこわいよ…]WT?60[6603]);")	// ⑦ミニキノコ-せりふ１
		set_chr( 86,990,	 0, 0,     0,   0,  0,		  0,     0, 0,"(WT?30 L8?6600 [6620……]WT?60[6603] WT?30 L8?6600 [6620シクシク…]WT?60[6603] WT?30 L8?6600 [6620H切な人が助けてくれたけど…]WT?60[6603] WT?30 L8?6600 [6620どこにいるの…\nお父さん…]WT?60[6603]);")	// ⑦ミニキノコ-せりふ２
		set_chr( 87,990,	 0, 0,     0,   0,  0,		  0,     0, 0," WT?30 L5?6600 [6620……]WT?60[6603] WT?30 L5?6600 [6620シクシク…]WT?60[6603] WT?30 L5?6600 [6620わたしをBれ去ってどうする荨]WT?60[6603] WT?30 L5?6600 [6620せめておいしく召し上がってね…]WT?60[6603];")	// ⑦ミニキノコ-せりふ３

	}
	else
	{
		MOT( 52, 6, 1 ) 
	}

	// 父キノコ扉
	if ( !F2109 )
	{
		set_chr(112,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"L1?5567 SF2109 O1_18 <EV_AdjPosKinoko55> WT?10 C0_54 WT?20 M4_54 WT?30 C0_0;")// Aa
	}
	else
	{
		MOT(54, 6, 1)
	}


//  -------  no typ     tip      x    y   z    mot  向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++



//■雒婀逃性O定

	EV("EV_MonsterParty")

}

//--------------------------------------------------------------------
EV_MonsterParty
{
	//初回
	if(!F101)
	{
		F_set(101)
		F_set_chr(66, CF_NO_MOVE)	// ミニキノコ移硬豢
	}
	// 踊り。解除方法ができるまで保留
//	rotate(1,1,1,66,0,0,30)//	回移印typ[0=座酥付 1=キャラXの位置+Z 2=自分相位置] Len=到_回距x
//	rotate(2,1,1,66,0,0,30)//	回移印typ[0=座酥付 1=キャラXの位置+Z 2=自分相位置] Len=到_回距x
//	rotate(3,1,1,66,0,0,30)//	回移印typ[0=座酥付 1=キャラXの位置+Z 2=自分相位置] Len=到_回距x
//	rotate(4,1,1,66,0,0,30)//	回移印typ[0=座酥付 1=キャラXの位置+Z 2=自分相位置] Len=到_回距x
//	wait_move(1)
//	loop


}

//--------------------------------------------------------------------
EV_EnterMonsterRoom
{
	F_reset_chr(66, CF_NO_MOVE)	// ミニキノコ移涌赡
}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

//--------------------------------------------------------------------
EV_AdjPosKinoko55
{
	// 位置をa正
	jump(67, 1,	15,	 55,0, 0,	0)
	wait_move(67)
	SE(231,67)		// きのこO置
}

#EndScriptTable
//====================================================================

