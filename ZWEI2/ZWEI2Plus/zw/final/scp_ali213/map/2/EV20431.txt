//====================================================================
//ステ`ジトラップスクリプト
//[12043][水没神殿－サブ③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------

//■グロ`バルフラグ・ル`トフラグはev20411.txt参照

//■ロ`カルフラグ
// 100-103 スイッチ操作
// 111-114 主人公之いるエリア判定
// 115-117 M行中之カメライベントを区eする


#TAKARA2_CH	48
#IT_TAKARA2	231		//◇231アクセスロット②

//--------------------------------------------------------------------
INIT
{
//■地形
	// 滑る床
	set_obj("ob20141a",	 5, 5,     0,   0,  0,    0)
	set_obj("ob20141a",	 4, 6,     0,   0,  0,    0)
	set_obj("ob20141a",	 6, 6,     0,   0,  0,    0)
	set_obj("ob20141a",	 5, 7,     0,   0,  0,    0)

	//床りマ`ク
    set_obj("mo20021a",	 5, 6,     0,   0,  1,    0)

	//天井から光
    set_obj("mo20031a",	 5, 6,     0,   0,  0,    0)

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■A段・扉

	set_chr( 90,990,	 6, 3,  -100,   0,  0,		 90,  0102, 6,"K0_1;")		//①エントリ サブ②
	set_obj("@ob20111a", 6, 3,     0,   0,  0,		 90)						//①A段下（神殿）
	set_chr(190,1300,	 6, 3,     0,   0,  0,		 90,     0, 0,";")			//A段下（ダミ`）

	set_chr( 91,990,	 5, 9,     0, 100,  0,		180,  0201, 6,"K0_12049;")	//②エントリ サブK
	set_obj("@ob20131a", 5, 9,     0, 100,  0,		180)						//②ア`チ（神殿）
	set_chr(109,622,	 5, 9,     0,   0,  0,		  0,   180, 0,";")			//②ゴ`ル用天使
	set_chr(191,1400,	 5, 9,     0,   0,  0,		  0,   180, 0,";")			//ア`チ（ダミ`）

	set_chr( 50,507,	 5, 6,     0,-750,  0,		  7,     0, 6,";")	//③扉（神殿） ]i
	set_chr( 51,507,	 5, 6,   750,   0,  0,		  7,    90, 6,";")	//④扉（神殿） ]i
	set_chr( 52,507,	 5, 6,     0, 750,  0,		  7,   180, 6,";")	//⑤扉（神殿） ]i
	set_chr( 53,507,	 5, 6,  -750,   0,  0,		  7,   270, 6,";")	//⑥扉（神殿） ]i
	set_chr( 54,507,	 5, 8,     0, 900,  0,		  8,     0, 6,";")	//⑦扉（神殿） 一通

//■スイッチ・看板
	set_chr( 60,664,	 5, 5,  -225,-225, 18,		  2,     0, 0,"") //①豆球
	set_chr( 61,664,	 5, 5,     0, 225, 18,		  2,     0, 0,"") //②豆球
	set_chr( 62,664,	 5, 5,   225,-225, 18,		  2,     0, 0,"") //③豆球

	set_chr( 63,664,	 6, 6,  -225,-250, 18,		  3,     0, 0,"") //④豆球
	set_chr( 64,664,	 6, 6,   225,   0, 18,		  3,     0, 0,"") //⑤豆球
	set_chr( 65,664,	 6, 6,  -225, 250, 18,		  3,     0, 0,"") //⑥豆球

	set_chr( 66,664,	 5, 7,  -225, 225, 18,		  2,     0, 0,"") //⑦豆球
	set_chr( 67,664,	 5, 7,     0,-225, 18,		  2,     0, 0,"") //⑧豆球
	set_chr( 68,664,	 5, 7,   225, 225, 18,		  2,     0, 0,"") //⑨豆球

	set_chr( 69,664,	 4, 6,   225,-225, 18,		  3,     0, 0,"") //⑩豆球
	set_chr( 70,664,	 4, 6,  -225,   0, 18,		  3,     0, 0,"") //□豆球
	set_chr( 71,664,	 4, 6,   225, 225, 18,		  3,     0, 0,"") //□豆球

//■ハニワ・

	if ( !F2170 )
	{
		set_chr( 40,802,	 7, 6,  -150,   0,  0,		  2,    90, 0,"I_$$$1 SF2170 V4_140;")	//①
		set_chr(140,811,	 7, 6,  -150,   0,  0,		 -1,    90, 0,";")
	}
	else
	{
		set_chr(140,811,	 7, 6,  -150,   0,  0,		  0,    90, 0,";")
	}


	if ( !F2171 )
	{
		set_chr( 41,802,	 5, 8,     0,-150,  0,		  2,   180, 0,"I_$$$1 SF2171 V4_141;")	//②
		set_chr(141,811,	 5, 8,     0,-150,  0,		 -1,   180, 0,";")
	}
	else
	{
		set_chr(141,811,	 5, 8,     0,-150,  0,		  0,   180, 0,";")
	}


	if ( !F2172 )
	{
		set_chr( 42,802,	 3, 6,   150,   0,  0,		  2,     0, 0,"I_$$$1 SF2172 V4_142;")	//③
		set_chr(142,811,	 3, 6,   150,   0,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(142,811,	 3, 6,   150,   0,  0,		  0,     0, 0,";")
	}

//■宝箱
	set_chr( 49,626,	 5, 6,   200,   0,  0,		  0,     0,10,"!F2928 I_SLOT SF2928 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2928 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}

	if(IT_TAKARA2<1)
		set_chr( TAKARA2_CH,560,	5, 6,  -200,   0,  0,  	   6,     0,20,"<TK_TAKARA2>;")		//②宝箱（K）
	else
		set_chr( TAKARA2_CH,560,	5, 6,  -200,   0,  0,  	   7,     0, 0,";")		//②宝箱（K）


//■F・障害物
	set_chr( 72,656,	 5, 5,  -150,-500,  0,		  2,     0, 0,"") //信号机
	set_chr( 73,656,	 6, 6,  -150,-500,  0,		  2,     0, 0,"") //信号机
	set_chr( 74,656,	 5, 7,  -150,-500,  0,		  2,     0, 0,"") //信号机
	set_chr( 75,656,	 4, 6,  -150,-500,  0,		  2,     0, 0,"") //信号机

//■
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	set_chr(  4,205,	 4, 5,     0, 750,  0,		  0,   270, 0,";")//① しびれくらげ
	set_chr(  5,129,	 4, 7,     0,-750,  0,		  0,   270, 0,";")//② わ`しゃ`く

	set_chr(  6,205,	 6, 5,     0, 750,  0,		  0,    90, 0,";")//③ しびれくらげ
	set_chr(  7,129,	 6, 7,     0,-750,  0,		  0,    90, 0,";")//④ わ`しゃ`く

	set_chr( 10,211,	 6, 6,   250,-275,  0,		  0,     0, 0,";")//⑤a しびれまんた
	set_chr( 11,211,	 6, 6,   250, 275,  0,		  0,     0, 0,";")//⑤b しびれまんた

	set_chr( 13,127,	 5, 7,     0,-450,  0,		  0,     0, 0,";")//⑥a がにめで
	set_chr( 14,168,	 5, 7,     0, 250,  0,		  0,     0, 0,";")//⑥b そ`どふぃっしゅ

	set_chr( 17,134,	 4, 6,     0,-150,  0,		  0,     0, 0,";")//⑦a いわがえる
	set_chr( 18,251,	 4, 6,  -150, 150,  0,		  0,     0, 0,";")//⑦b ばっとさん

	set_chr( 21,217,	 5, 4,   -50,-250,  0,		  0,     0, 0,";")//⑧a あくあ
	set_chr( 22,217,	 5, 4,   -50, 250,  0,		  0,     0, 0,";")//⑧b あくあ


//■イベント
	// すべて之信号机が青になった
	if ( !F2101 )
	{ 
		set_chr( 80,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F115 O1_18 WT?10 C0_50 WT?20 M4_50 WT?30 C0_54 WT?20 M4_54 WT?30 SF2101 SF2102 C0_0;") //
		set_chr( 81,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F116 O1_18 WT?10 C0_51 WT?20 M4_51 WT?30 C0_54 WT?20 M4_54 WT?30 SF2101 SF2103 C0_0;") //
		set_chr( 82,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F117 O1_18 WT?10 C0_52 WT?20 M4_52 WT?30 C0_54 WT?20 M4_54 WT?30 SF2101 SF2104 C0_0;") //
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F118 O1_18 WT?10 C0_53 WT?20 M4_53 WT?30 C0_54 WT?20 M4_54 WT?30 SF2101 SF2105 C0_0;") //
	}
	else
	{
		set_chr( 80,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M3_60 M2_61 M2_62  M2_63 M2_64 M3_65  M2_66 M3_67 M3_68  M2_69 M3_70 M2_71  M6_54");

/*		MOT( 60, 3, 0 )
		MOT( 61, 2, 0 )
		MOT( 62, 2, 0 )

		MOT( 63, 2, 0 )
		MOT( 64, 2, 0 )
		MOT( 65, 3, 0 )

		MOT( 66, 2, 0 )
		MOT( 67, 3, 0 )
		MOT( 68, 3, 0 )

		MOT( 69, 2, 0 )
		MOT( 70, 3, 0 )
		MOT( 71, 2, 0 )

		MOT( 54, 6, 0 )
*/
		if ( F2102 )
		{
			MOT( 50, 6, 0 )
		}

		if ( F2103 )
		{
			MOT( 51, 6, 0 )
		}

		if ( F2104 )
		{
			MOT( 52, 6, 0 )
		}

		if ( F2105 )
		{
			MOT( 53, 6, 0 )
		}
	}

	set_chr( 84,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"     M4?72 M4?73 M4?74 M4?75 SF115 #0_84 #0_85 #0_86 #0_87;")
	set_chr( 85,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"F112 M4?72 M4?73 M4?74 M4?75 SF116 #0_84 #0_85 #0_86 #0_87;")
	set_chr( 86,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"F113 M4?72 M4?73 M4?74 M4?75 SF117 #0_84 #0_85 #0_86 #0_87;")
	set_chr( 87,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"F114 M4?72 M4?73 M4?74 M4?75 SF118 #0_84 #0_85 #0_86 #0_87;")

	// 主人公之いるエリア判定
	set_chr(175,990,	 5, 5,     0,   0,  0,		  0,  2909, 6,"SF111 RF112 RF113 RF114")
	set_chr(176,990,	 6, 6,     0,   0,  0,		 90,  0929, 6,"SF112 RF111 RF113 RF114")
	set_chr(177,990,	 5, 7,     0,   0,  0,		180,  2909, 6,"SF113 RF111 RF112 RF114")
	set_chr(178,990,	 4, 6,     0,   0,  0,		270,  0929, 6,"SF114 RF111 RF112 RF113")

	// 豆球スイッチ判定×4 : 3bit之うち3正しければ青、2正しければ黄、他は赤

	// 初:000 正:100
	set_chr(151,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F100 M2_72") //信号机1 1か0之一致
	set_chr(153,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F100 M2?60 M2?61 M2?62 SF100 M3_72") //信号机1 2之一致
	set_chr(154,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F100 M3?60 M3?61 M2?62 SF100 M3_72") //信号机1 2之一致
	set_chr(155,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F100 M3?60 M2?61 M3?62 SF100 M3_72") //信号机1 2之一致
	set_chr(156,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF100 M3?60 M2?61 M2?62 SF100 M4_72") //信号机1 3之一致

	// 初:111 正:001
	set_chr(157,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F101 M2_73") //信号机2 1か0之一致
	set_chr(159,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F101 M3?63 M2?64 M3?65 SF101 M3_73") //信号机2 2之一致
	set_chr(160,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F101 M2?63 M3?64 M3?65 SF101 M3_73") //信号机2 2之一致
	set_chr(161,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F101 M2?63 M2?64 M2?65 SF101 M3_73") //信号机2 2之一致
	set_chr(162,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF101 M2?63 M2?64 M3?65 SF101 M4_73") //信号机2 3之一致

	// 初:000 正:011
	set_chr(163,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F102 M2_74") //信号机3 1か0之一致
	set_chr(165,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F102 M3?66 M3?67 M3?68 SF102 M3_74") //信号机3 2之一致
	set_chr(166,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F102 M2?66 M2?67 M3?68 SF102 M3_74") //信号机3 2之一致
	set_chr(167,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F102 M2?66 M3?67 M2?68 SF102 M3_74") //信号机3 2之一致
	set_chr(168,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF102 M2?66 M3?67 M3?68 SF102 M4_74") //信号机3 3之一致

	// 初:111 正:010
	set_chr(169,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F103 M2_75") //信号机4 1か0之一致
	set_chr(171,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F103 M3?69 M3?70 M2?71 SF103 M3_75") //信号机4 2之一致
	set_chr(172,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F103 M2?69 M2?70 M2?71 SF103 M3_75") //信号机4 2之一致
	set_chr(173,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F103 M2?69 M3?70 M3?71 SF103 M3_75") //信号机4 2之一致
	set_chr(174,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF103 M2?69 M3?70 M2?71 SF103 M4_75") //信号机4 3之一致

//■场面固有O定
	map_color(100,100,100,0);//R,G,B, time 100%
	map_spotbmp(25);//100%
}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

#EndScriptTable
//====================================================================

