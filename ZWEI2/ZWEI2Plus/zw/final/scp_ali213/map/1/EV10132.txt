//====================================================================
//ステ`ジトラップスクリプト
//[11013][坑－梅ン③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グロ`バルフラグ・ル`トフラグはev10112.txt参照

//■ロ`カルフラグ
// 100 中ボス警
// 101 中ボス出F
// 102 ⑩长出F
// 109 中ボスBGM管理


#TREASURE_CH	48
#Fx_TREASURE	2309	//☆009トパ`ズ

// 宝之部屋
#WOODBOX_CH		47
#IT_WOODBOX		168		//∴168ししゃも

//--------------------------------------------------------------------
INIT
{
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■A段・扉

	set_chr( 90,990,	 2, 7,   100,   0,  0,		270,  0102, 6,"K0_1;")		//①エントリ 梅ン②
	set_obj("@obx0012a", 2, 7,     0,   0,  0,		270)						//①A段下（岩）
	set_chr(190,1300,	 2, 7,     0,   0,  0,		  0,   270, 0,";")			//A段下（ダミ`）

	set_chr( 91,990,	 8, 1,     0,-150,  0,		  0,  0201, 6,"K0_11019;")	//②エントリ 中继分岐
	set_obj("@obx0032a", 8, 1,     0,-150,  0,		  0)						//②ア`チ（坑）
	set_chr(109,622,	 8, 1,     0,-150,  0,		  0,     0, 0,";")			//②ゴ`ル用天使
	set_chr(191,1400,	 8, 1,     0,-150,  0,		  0,     0, 0,";")			//ア`チ（ダミ`）

	set_chr( 50,502,	 6, 4,     0, 900,  0,		  6,     0, 0,";")	//③扉（岩） _放 中ボス部屋入口
	set_chr( 51,502,	 5, 3,  -900,   0,  0,		  7,    90, 0,";")	//④扉（岩） ]i 中ボス部屋奥
	set_chr( 52,502,	 5, 7,     0,-900,  0,		  7,   180, 0,";")	//⑤扉（岩） ]i
	set_chr( 53,502,	 7, 5,     0,-900,  0,		  3,     0, 6,";")	//⑥扉（岩） 自由
	set_chr( 54,502,	 8, 2,     0, 900,  0,		  3,     0, 6,";")	//⑦扉（岩） 自由
	set_chr( 55,502,	 8, 7,     0,-900,  0,		  3,     0, 6,";")	//⑧扉（岩） 自由

//■スイッチ・看板
	// 豆球
	set_chr( 56,657,	 5, 7,  -350,-350,  0,		  0,   330, 0,";")	//②ハテナ看板
	set_chr( 57,804,	 5, 7,  -350,-350,115,		  0,   330, 8,"(L2?99 [9991新k明！\n魔力k式ドア] WT?20 L2!99 [9903] WT?30);")	//①看板
	set_chr( 58,664,	 6, 7,     0,   0,  0,		  2,     0, 8,"M3?99 SF2105 WT?10 C0_99 WT?45 C0_52 WT?20 M4_52 WT?30 C0_0 #8_59 WT?240 M2_99 O0_1324 WT?20 (M3?99 WT?240 M2_99 O0_1324 WT?20 );");  //②豆球
	if ( !F2105 )
	{
		set_chr( 60,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2105 O1_18;");  //トラップ解除抗音
	}
	set_chr( 59,990,	 6, 7,     0,   0,  0,		  2,     0, 3,"(M3?58 M4_52 M2?58 M5_52);");  //⑤扉（岩）操作

	// 中ボス看板
	set_chr( 62,658,	 6, 5,  -200,-450,  0,		  0,     0, 0,";")	//③中ボス看板
	set_chr( 63,804,	 6, 5,  -200,-450,115,		  0,     0, 8,"(L2?99 [9991こ之先之魔物は危！\nＬｖ１では秒です！（本当）] WT?30 L2!99 [9903] WT?30);")	//④看板

	set_chr( 61,655,	 7, 5,  -650,-450,  0,		  0,     0, 0,";")	//⑤路案内

//  -------      no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■ハニワ・
	if ( !F2170 )
	{
		set_chr( 40,802,	 6, 6,   -75,-450,  0,		  2,   180, 0,"I_$$$1 SF2170 V4_140;")	//①
		set_chr(140,811,	 6, 6,   -75,-450,  0,		 -1,   180, 0,";")
	}
	else
	{
		set_chr(140,811,	 6, 6,   -75,-450,  0,		  0,   180, 0,";")
	}

	if ( !F2171 )
	{
		set_chr( 41,802,	 7, 6,     0,   0,  0,		  2,    90, 0,"I_$$$1 SF2171 V4_141;")	//②
		set_chr(141,811,	 7, 6,     0,   0,  0,		 -1,    90, 0,";")
	}
	else
	{
		set_chr(141,811,	 7, 6,     0,   0,  0,		  0,    90, 0,";")
	}

	if ( !F2172 )
	{
		set_chr( 42,802,	 7, 4,   400,  50,  0,		  2,     0, 0,"I_$$$1 SF2172 V4_142;")	//③
		set_chr(142,811,	 7, 4,   400,  50,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(142,811,	 7, 4,   400,  50,  0,		  0,     0, 0,";")
	}

//■宝箱
	set_chr( 49,626,	 8, 2,     0,-450,  0,		  0,     0,10,"!F2914 I_SLOT SF2914 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2914 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}

	// ボス部屋奥
	if( !Fx_TREASURE )
		set_chr( TREASURE_CH,561,	 4, 3,    0,   0,  0,     6,   270,20,"<TK_TREASURE>;")	// ②宝箱（上）
	else
		set_chr( TREASURE_CH,561,	 4, 3,    0,   0,  0,     7,   270, 0,";")	// ②宝箱（上）

	// 箱
	if( !Fx_113Food1 )
	{
		set_chr( WOODBOX_CH,562,	 9, 7,    0,   0,  0,	  6,    90,20,"<TK_WOODBOX><EV_SetGetFood1><EV_WaitTakara102>;")// ③木箱
		set_chr( 37,100,	 8, 7,     0,   0,100,		 -1,   270, 0,";") //⑩ ズツツキ
		set_chr(150,990,	 0, 0,     0,   0,  0,		  0,  0, 8,"F102 C0_37 WT?20 V1_37 WT?45 C0_0;");
	}
	else
	{
		set_chr( WOODBOX_CH,562,	 9, 7,    0,   0,  0,	  7,    90, 0,";")// ③木箱
		set_chr( 37,100,	 8, 7,     0,   0,  0,  	  0,    180, 0,";") //⑩ ズツツキ
		F_set(102);
	}

//■F・障害物
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	set_chr(110,627,	 6, 7,     0,-600,  0,		  0,     0, 0,";")	// 判

	if ( !F2180 )
	{
		set_chr( 65,633,	 5, 7,   750,   0,  0,		  2,    90, 0,"SF2180;")	//①ヒビ壁
	}

	if ( !F2181 )
	{
		set_chr( 66,633,	 6, 7,  -750,   0,  0,		  2,    90, 0,"SF2181;")	//②ヒビ壁
	}

//■
	set_chr( 18,214,	 3, 7,   150, 150,  0,		  0,    90, 0,";")//① ばっとくん

	set_chr(  1,204,	 4, 7,  -350,-200,500,		  0,    45, 0,";")//②a ちびわ`む
	set_chr(  2,204,	 4, 7,   450,-325,500,		  0,   270, 0,";")//②b ちびわ`む
	set_chr(  3,204,	 4, 7,   400,-350,500,		  0,     0, 0,";")//②c ちびわ`む
	set_chr(  4,204,	 4, 7,   300,-300,500,		  0,    90, 0,";")//②d ちびわ`む

	set_chr( 35,311,	 5, 6,  -100,   0,  0,		  0,     0, 0,";")//③ あおじぇり`
	set_chr( 36,214,	 5, 7,  -600, 150,  0,		  0,     0, 0,";")//④ ばっとくん

	set_chr(  5,208,	 6, 5,   200, 150,  0,		  0,     0,	0,";")//⑤ 科波鲁特
		chr_equip2(  5,	"eq_103",	"Bone_Head",	103,		95, 0, 0,	0, 45,  0);		// 工事用安全帽
		chr_equip2(  5,	"eq_014",	"Bone_RightArm",100,		0,45,0,	0,25,0);	// つるはし
		chr_state_LV( 5, 1);

	set_chr(  6,208,	 7, 5,  -200, 150,  0,		  0,    90, 0,";")//⑥a 科波鲁特

	set_chr(  7,214,	 7, 5,   100, -50,  0,		  0,    90, 0,";")//⑥b ばっとくん

	// ボス
	if ( !F2100 )
	{
		set_chr( 19,350,	 5, 3,   900, 900,800,		 -1,   315, 8,"F101 V1_99 <EV_BossItemSpawner>;")//⑦ おおあおじぇり`
		F_set_chr(19,CF_NO_CLIP2)
	
		// 前座
		set_chr( 20,311,	 5, 3,   900, 900,500,		 -1,   315, 8,"F100 V1_99;")//⑦ あおじぇり`
		set_chr( 21,311,	 5, 3,   900, 900,500,		 -1,   315, 8,"F100 V1_99;")//⑦ あおじぇり`
		set_chr( 22,311,	 5, 3,   900, 900,500,		 -1,   315, 8,"F100 V1_99;")//⑦ あおじぇり`
		set_chr( 23,311,	 5, 3,   900, 900,500,		 -1,   315, 8,"F100 V1_99;")//⑦ あおじぇり`
		set_chr( 24,311,	 5, 3,   900, 900,500,		 -1,   315, 8,"F100 V1_99;")//⑦ あおじぇり`
		set_chr( 25,311,	 5, 3,   900, 900,500,		 -1,   315, 8,"F100 V1_99;")//⑦ あおじぇり`
		set_chr( 26,311,	 5, 3,   900, 900,500,		 -1,   315, 8,"F100 V1_99;")//⑦ あおじぇり`
		F_set_chr(20,CF_NO_CLIP2)
		F_set_chr(21,CF_NO_CLIP2)
		F_set_chr(22,CF_NO_CLIP2)
		F_set_chr(23,CF_NO_CLIP2)
		F_set_chr(24,CF_NO_CLIP2)
		F_set_chr(25,CF_NO_CLIP2)
		F_set_chr(26,CF_NO_CLIP2)
	// 11,17も予s

	// 倒してない
		set_chr( 80,990,	 6, 4,     0, 200,  0,		  0,  0701, 6,"SF100;")//⑧ 中ボス部屋 前座スライム群登场エリア
		set_chr( 81,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F20 F21 F22 F23 F24 F25 F26 !F2100 #8_85 WT?60 S0_1 WT?120 #6_82;")//警蟪霈F
		set_chr( 82,990,	 6, 4,  -900,-900,  0,		  0,072323, 3,"SF101 M5_50;")//中ボス出F
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F19 F11 F12 F13 F14 F15 F16 F17 WT?10 SF2100 O1_18 <EV_NormalBGM> WT?30 C0_51 WT?20 M4_51 M4_50 WT?30 C0_0;")//中ボス战LK了判定

		// 中ボスBGM
		// 前座を全绀丹护毪85稼印
		set_chr( 85,990,	 0, 0,     0,   0,  0,		  0,     0, 3,"(F109 <EV_BossBGM> WT?90 !F101 !F109 <EV_NormalBGM> WT?90);");
		set_chr(161,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F2100 F101 SF109");	// ボスが生きていて、ボス战L中ならば109をセット
		set_chr(162,990,	 6, 4,  -900,-900,  0,		  0,072323, 6,"!F2100 SF109");		// ボスが生きていて、ボス部屋内ならば109をセット
		set_chr(163,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF109");				// 109をクリア
	}
	else
	{
	// 倒した
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M6_51;")		// 中ボス部屋扉を_く
	}

	set_chr( 28,208,	 7, 3,   250,   0,  0,		  0,     0, 0,";")//⑧a 科波鲁特
	set_chr( 29,311,	 7, 3,   -50,-100,  0,		  0,   315, 0,";")//⑧b あおじぇり`
	set_chr( 30,214,	 7, 3,   -50, 100,  0,		  0,    45, 0,";")//⑧c ばっとくん

	set_chr( 31,311,	 8, 3,  -150,-150,  0,		  0,    45, 0,";")//⑨a あおじぇり`
	set_chr( 32,311,	 8, 3,   150,-150,  0,		  0,   315, 0,";")//⑨b あおじぇり`
	set_chr( 33,311,	 8, 3,  -150, 150,  0,		  0,   225, 0,";")//⑨c あおじぇり`
	set_chr( 34,311,	 8, 3,   150, 150,  0,		  0,   135, 0,";")//⑨d あおじぇり`

	// chr11-17はボスが生むために予s

//■イベント
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++

//■场面固有O定
	map_color(100,100,100,0);//R,G,B, time 100%
	map_spotbmp(55);//100%
}

//--------------------------------------------------------------------
EV_SetGetFood1
{
	F_set(Fx_113Food1)
}

//--------------------------------------------------------------------
EV_WaitTakara102
{
	wait_EV("TK_WOODBOX")
	wait(20)
	F_set(102)
	wait(35)
	EMO(37, EMO_AOSUZI)
}

//--------------------------------------------------------------------
EV_BossBGM
{
	stop_BGM(30)
	wait(30)
	BGM(35)
}

//--------------------------------------------------------------------
EV_NormalBGM
{
	stop_BGM(30)
	wait(30)
	BGM(21)
}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

//--------------------------------------------------------------------
EV_BossItemSpawner
{
	set_chr(164,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F19 I_FFF3 I_FFF3 I_FFF3;");
	chr_equip_chr(164, 19,"csp", 100,	0,0,0,	0,0,0);
}

#EndScriptTable
//====================================================================

